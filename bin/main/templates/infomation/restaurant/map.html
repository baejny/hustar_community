<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

<title>Hustime - Hustar Community</title>

<!-- Bootstrap Core CSS -->
<link href="/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

<!-- MetisMenu CSS -->
<link href="/vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

<!-- Custom CSS -->
<link href="/dist/css/sb-admin-2.css" rel="stylesheet">

<!-- Custom Fonts -->
<link href="/vendor/font-awesome/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

<script src="//code.jquery.com/jquery-3.2.1.min.js"></script>
<script
	src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=be5efb1d-2b72-4f3c-9058-ef8f66f4d9f0"></script>
<script type="text/javascript">
	var map;
	// 페이지가 로딩이 된 후 호출하는 함수입니다.
	function initTmap() {
		// map 생성
		// Tmap.map을 이용하여, 지도가 들어갈 div, 넓이, 높이를 설정합니다.
		map = new Tmapv2.Map("map_div", {
			center : new Tmapv2.LatLng(35.877446, 128.735364), // 지도 초기 좌표
			width : "100%", // map의 width 설정
			height : "600px" // map의 height 설정	
		});
		map.setZoom(17);
		addMarkerAni(Tmapv2.MarkerOptions.ANIMATE_BOUNCE);
	};

	// 마커들을 저장할 배열입니다.
	var markers = [];

	// 마커들의 좌표를 저장할 배열입니다.
	var coords = [ new Tmapv2.LatLng(35.877446, 128.735974), ];

	// 마커를 추가하는 함수입니다.
	function addMarkerAni(aniType) {
		var coordIdx = 0;

		removeMarkers(); // 지도에 새로 등록하기 위해 모든 마커를 지우는 함수입니다.

		var func = function() {
			//Marker 객체 생성.
			var marker = new Tmapv2.Marker({
				position : coords[coordIdx++], //Marker의 중심좌표 설정.
				draggable : true, //Marker의 드래그 가능 여부.
				animation : aniType, //Marker 애니메이션.
				animationLength : 500, //애니메이션 길이.
				label : 'test', //Marker의 라벨.
				title : '타이틀', //Marker 타이틀.
				icon : "/images/maker.png",
				map : map
			//Marker가 표시될 Map 설정.
			});

			markers.push(marker);

			if (coordIdx < 5) {
				// 일정 시간 간격으로 마커를 생성하는 함수를 실행합니다
				setTimeout(func, 300);
			}
		}
		// 일정 시간 간격으로 마커를 생성하는 함수를 실행합니다
		setTimeout(func, 300);
	}

	// 모든 마커를 제거하는 함수입니다.
	function removeMarkers() {
		for (var i = 0; i < markers.length; i++) {
			markers[i].setMap(null);
		}
		markers = [];
	}

	//마커의 옵션을 설정해주는 함수입니다.
	function addMarker(lonlatoption) {
		// 마커 생성
		var marker = new Tmapv2.Marker({
			position : new Tmapv2.LatLng(lonlatoption.lonlat.latitude(),
					lonlatoption.lonlat.longitude()), //Marker의 중심좌표 설정.
			map : map, //Marker가 표시될 Map 설정..
			title : lonlatoption.title
		//마우스 위치시 출력할 타이틀
		});
	}

	//특정 장소를 검색하는 함수입니다.
	function searchPOI() {
		var center = map.getCenter();//map의 중심 좌표 값을 받아 옵니다.
		var optionObj = {
			reqCoordType : "WGS84GEO", //요청 좌표계 옵셥 설정입니다.
			resCoordType : "WGS84GEO", //응답 좌표계 옵셥 설정입니다.
			centerLon : 128.735364, //POI검색시 중앙좌표의 경도입니다.
			centerLat : 35.877446, //POI검색시 중앙좌표의 위도입니다. 
		};
		var params = {
			onComplete : onComplete,
			onProgress : onProgress,
			onError : onError
		};
		var tData = new Tmapv2.extension.TData();
		tData.getPOIDataFromSearch(encodeURIComponent("식당"), optionObj, params);//encodeURIComponent함수로 해당 파라메터 값을 처리합니다.
	}

	//POI검색
	function onComplete() {

		console.log(this._responseData); //xml로 데이터를 받은 정보들을 콘솔창에서 확인할 수 있습니다.
		var kmlObject = new Tmapv2.extension.KML();
		var kmlForm = kmlObject.read(this._responseData);

		if (jQuery(this._responseData).find("searchPoiInfo pois poi").text() != '') {
			jQuery(this._responseData).find("searchPoiInfo pois poi").each(
					function() {//결과를 each문으로 돌려 마커를 등록합니다.
						//response 데이터중 원하는 값을 find 함수로 찾습니다.
						var name = jQuery(this).find("name").text();
						var id = jQuery(this).find("id").text();
						var lon = jQuery(this).find("frontLon").text();
						var lat = jQuery(this).find("frontLat").text();
						var lonlatoption = {
							title : name,//마커 라벨 text 설정
							lonlat : new Tmapv2.LatLng(lat, lon)
						//마커 라벨 좌표 설정
						};
						addMarker(lonlatoption);//마커를 추가하는 함수입니다.
					});
		} else {
			alert('검색결과가 없습니다.');
		}
		map.setCenter(new Tmapv2.LatLng(35.877446, 128.735364));
		map.setZoom(17);
	}

	//데이터 로드중 실행하는 함수입니다.
	function onProgress() {

	}

	//데이터 로드 중 에러가 발생시 실행하는 함수입니다.
	function onError() {
		alert("onError");
	}
</script>

</head>

<body onload="initTmap()">

	<div id="wrapper">

		<!-- Navigation -->
		<nav class="navbar navbar-default navbar-static-top" role="navigation"
			style="margin-bottom: 0">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target=".navbar-collapse">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/">Hustime</a>
			</div>
			<!-- /.navbar-header -->

			<ul class="nav navbar-top-links navbar-right">
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#"> <i
						class="fa fa-envelope fa-fw"></i> <i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-messages">
						<li><a href="#">
								<div>
									<strong>John Smith</strong> <span class="pull-right text-muted">
										<em>Yesterday</em>
									</span>
								</div>
								<div>Lorem ipsum dolor sit amet, consectetur adipiscing
									elit. Pellentesque eleifend...</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<strong>John Smith</strong> <span class="pull-right text-muted">
										<em>Yesterday</em>
									</span>
								</div>
								<div>Lorem ipsum dolor sit amet, consectetur adipiscing
									elit. Pellentesque eleifend...</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<strong>John Smith</strong> <span class="pull-right text-muted">
										<em>Yesterday</em>
									</span>
								</div>
								<div>Lorem ipsum dolor sit amet, consectetur adipiscing
									elit. Pellentesque eleifend...</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>Read
									All Messages</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-messages --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#"> <i class="fa fa-tasks fa-fw"></i>
						<i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-tasks">
						<li><a href="#">
								<div>
									<p>
										<strong>Task 1</strong> <span class="pull-right text-muted">40%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-success"
											role="progressbar" aria-valuenow="40" aria-valuemin="0"
											aria-valuemax="100" style="width: 40%">
											<span class="sr-only">40% Complete (success)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 2</strong> <span class="pull-right text-muted">20%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-info" role="progressbar"
											aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"
											style="width: 20%">
											<span class="sr-only">20% Complete</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 3</strong> <span class="pull-right text-muted">60%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-warning"
											role="progressbar" aria-valuenow="60" aria-valuemin="0"
											aria-valuemax="100" style="width: 60%">
											<span class="sr-only">60% Complete (warning)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<p>
										<strong>Task 4</strong> <span class="pull-right text-muted">80%
											Complete</span>
									</p>
									<div class="progress progress-striped active">
										<div class="progress-bar progress-bar-danger"
											role="progressbar" aria-valuenow="80" aria-valuemin="0"
											aria-valuemax="100" style="width: 80%">
											<span class="sr-only">80% Complete (danger)</span>
										</div>
									</div>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>See
									All Tasks</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-tasks --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#"> <i class="fa fa-bell fa-fw"></i>
						<i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-alerts">
						<li><a href="#">
								<div>
									<i class="fa fa-comment fa-fw"></i> New Comment <span
										class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-twitter fa-fw"></i> 3 New Followers <span
										class="pull-right text-muted small">12 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-envelope fa-fw"></i> Message Sent <span
										class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-tasks fa-fw"></i> New Task <span
										class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a href="#">
								<div>
									<i class="fa fa-upload fa-fw"></i> Server Rebooted <span
										class="pull-right text-muted small">4 minutes ago</span>
								</div>
						</a></li>
						<li class="divider"></li>
						<li><a class="text-center" href="#"> <strong>See
									All Alerts</strong> <i class="fa fa-angle-right"></i>
						</a></li>
					</ul> <!-- /.dropdown-alerts --></li>
				<!-- /.dropdown -->
				<li class="dropdown"><a class="dropdown-toggle"
					data-toggle="dropdown" href="#"> <i class="fa fa-user fa-fw"></i>
						<i class="fa fa-caret-down"></i>
				</a>
					<ul class="dropdown-menu dropdown-user">
						<li><a href="#"><i class="fa fa-user fa-fw"></i> User
								Profile</a></li>
						<li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
						</li>
						<li class="divider"></li>
						<li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i>
								Logout</a></li>
					</ul> <!-- /.dropdown-user --></li>
				<!-- /.dropdown -->
			</ul>
			<!-- /.navbar-top-links -->

			<div class="navbar-default sidebar" role="navigation">
				<div class="sidebar-nav navbar-collapse">
					<ul class="nav" id="side-menu">
						<li class="sidebar-search">
							<div class="input-group custom-search-form">
								<input type="text" class="form-control" placeholder="Search...">
								<span class="input-group-btn">
									<button class="btn btn-default" type="button">
										<i class="fa fa-search"></i>
									</button>
								</span>
							</div> <!-- /input-group -->
						</li>
						<li><a href="index.html"><i class="fa fa-sign-in"></i>
								Login</a></li>
						<li><a href="index.html"><i class="fa fa-user"></i> Join</a>
						</li>
						<li><a href="#"><i class="fa fa-question-circle"></i> Q&A<span
								class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li><a href="flot.html">Tech Q&A</a></li>
								<li><a href="morris.html">SpringBoot Q&A</a></li>
							</ul> <!-- /.nav-second-level --></li>
						<li><a href="#"><i class="fa fa-comments"></i> COMMUNITY<span
								class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li><a href="/community/schedule">일정</a></li>
								<li><a href="/community/notice">공지사항</a></li>
								<li><a href="/community/free">자유게시판</a></li>
								<li><a href="/community/chat/room">채팅방</a></li>
							</ul> <!-- /.nav-second-level --></li>
						<li><a href="#"><i class="fa fa-info-circle"></i>
								INFORMATION<span class="fa arrow"></span></a>
							<ul class="nav nav-second-level">
								<li><a href="flot.html">정보공유</a></li>
								<li><a href="morris.html">참여기업</a></li>
							</ul> <!-- /.nav-second-level --></li>
					</ul>
				</div>
				<!-- /.sidebar-collapse -->
			</div>
			<!-- /.navbar-static-side -->
		</nav>

		<div id="page-wrapper">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">식당 정보</h1>
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">Hustime / infomation / restaurant</div>
						<div id="map_div"></div>
						<div class="well">
							<h4>DataTables Usage Information</h4>
							<p>
								DataTables is a very flexible, advanced tables plugin for
								jQuery. In SB Admin, we are using a specialized version of
								DataTables built for Bootstrap 3. We have also customized the
								table headings to use Font Awesome icons in place of images. For
								complete documentation on DataTables, visit their website at <a
									target="_blank" href="https://datatables.net/">https://datatables.net/</a>.
							</p>
							<button class="btn btn-default btn-lg btn-block" onClick="searchPOI()">주변 식당 찾기</button>
						</div>
					</div>
					<!-- /.panel -->
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
		</div>
		<!-- /#page-wrapper -->

	</div>
	<!-- /#wrapper -->

	<!-- jQuery -->
	<script src="/vendor/jquery/jquery.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="/vendor/bootstrap/js/bootstrap.min.js"></script>

	<!-- Metis Menu Plugin JavaScript -->
	<script src="/vendor/metisMenu/metisMenu.min.js"></script>

	<!-- Custom Theme JavaScript -->
	<script src="/dist/js/sb-admin-2.js"></script>

</body>

</html>
